from django.shortcuts import render
import pandas as pd
from django.http import HttpResponse
from core.models import Program, Partner, FiveW, District, GapaNapa


# Create your views here.
def uploadData(request):
    if "GET" == request.method:
        return render(request, 'dashboard.html')
    else:
        csv = request.FILES["csv_file"]
        df = pd.read_csv(csv)
        upper_range = len(df)
        org_col = df['ORGANIZATION NAME']

        try:
            # fiveData = [
            #     FiveW(
            #         program_name=Program.objects.get(program_name='Naxa'),
            #         partner_name=Partner.objects.get(partner_name='Naxa')
            #     ) for row in range(0, 2)
            #
            # ]
            # five = FiveW.objects.bulk_create(fiveData)
            # list = []
            # for row in range(0, upper_range):

                # try:
                #     imp_partner_1 = Partner.objects.get(program_name=df['IMPLEMENTING PARNTER 1'][row])
                #
                # except:
                #     imp_partner_1 = None
                #
                #
                # try:
                #     imp_partner_2 = Partner.objects.get(program_name=df['IMPLEMENTING PARTNER2'][row])
                #
                # except:
                #     imp_partner_2 = None
                #
                # try:
                #     imp_partner_3 = Partner.objects.get(program_name=df['IMPLEMENTING PARTNER 3'][row])
                #
                # except:
                #     imp_partner_3 = None
                #
                # try:
                #     program = Program.objects.get(program_name=df['PROGRAMME NAME'][row])
                #
                # except:
                #     program = None
                #
                # try:
                #     district = District.objects.get(program_name=df['DISTRICT'][row])
                #
                # except:
                #     district = None
                #
                # try:
                #     nagarpalika = GapaNapa.objects.get(program_name=df['Nagarpalika'][row])
                #
                # except:
                #     nagarpalika = None

                # FiveW.objects.create(fiveData)

            return HttpResponse(df['ORGANIZATION NAME'][0])
        except Exception as e:
            return HttpResponse(e)
