{% extends 'base.html' %}
{% load static %}
{% block content %}
<main class="dfid-main">
    <!-- dfid breadcrumb -->
    <div class="dfid-breadcrumb pdt-100">
        <ul class="flex-start">
            <li>
                <a href="/dashboard/five-list/"><i class="material-icons">assignment</i> Five W</a>
            </li>
            <li>Bulk Create</li>
        </ul>
    </div>
    <!-- program form -->
    <form class="program-form" method="POST" enctype="multipart/form-data">

        {% csrf_token %}

        {% if form.errors %}
        {% for field in form %}
        {% for error in field.errors %}
        <div class="alert alert-danger">
            <strong>{{ field.name|title }} {{ error|escape }}</strong>
        </div>
        {% endfor %}
        {% endfor %}
        {% for error in form.non_field_errors %}
        <div class="alert alert-danger">
            <strong>{{ error|escape }}</strong>
        </div>
        {% endfor %}
        {% endif %}


        <div class="default-form">
            <div class="row">

                <div class="col-md-5">
                    <div class="form-group ">
<!--                        <label for="id_image" class="">Image</label>-->
                        <input type="file" name="shapefile" id="id_image"/>
                    </div>
                </div>
            </div>
        </div>


        <div class="form-group mrt-100">
            <button type="submit" class="dfid-button sm-button">Save</button>
            <button type="button" class="dfid-button sm-button" style="background-color:whitesmoke;margin-left:20px"><a style="color:#7d7d7d" href="{% static 'dashboard/samplefile/five.csv' %}" download="samplefile.csv">View Template</a></button>
        </div>

        </div>


        <!-- category form -->

        
    </form>
    <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="confirmModalLabel">Confirm Delete</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <h4>Are you sure you would like to clear all data. This may result in permanent data loss.</h4>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" id='id_modal_confirm' class="btn btn-primary">Confirm</button>
            </div>
          </div>
        </div>
      </div>
</main>

{% endblock %}
{% block script %}
<script>
    $(document).ready(function(){
        $('#id_clear_data').click(function(e) {
            e.preventDefault();
            $('#id_clear_data').prop('checked', false);
            $('#confirmModal').modal('show');
        })
        $('#id_modal_confirm').click(function(e) {
            e.preventDefault();
            $('#id_clear_data').prop('checked', true);
            $('#confirmModal').modal('hide');
        })
        // $('#id_submit').click(function(e) {
        //     if($('#id_clear_data').is(':checked') == true) {
        //         $('#confirmModal').modal('show');
        //     }else{
        //         $.ajax({
        //             type: "POST",
        //             url: '/dashboard/bulk-upload/',
        //             data: new FormData($('#id_form')),
        //             dataType: 'json',
        //             contentType: false,
        //             processData: false,
        //             // csrfmiddlewaretoken: '{% csrf_token %}'
        //         }).done(function() {
        //             location.reload();
                
        //         });
        //     }
        // });
        // $('#id_modal_confirm').click(function(e){
        //     $.post('clear-data', function(data) {
        //         if(data.result == 'success') {
        //             $.ajax({
        //                 type: "POST",
        //                 url: '/dashboard/bulk-upload/',
        //                 data: {'shapefile': new FormData($('input[name=shapefile]').get(0))},
        //                 dataType: 'json',
        //                 contentType: false,
        //                 processData: false,
        //                 // csrfmiddlewaretoken: '{% csrf_token %}'
        //             }).done(function() {
        //                 location.reload();
                    
        //             });
        //         };
        //     });
        // });
    });
</script>
{% endblock %}

